<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TS EAMCET 2025 - Closing Ranks</title>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BEX3M5R4MZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-BEX3M5R4MZ');
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body style="background: linear-gradient(135deg, #0B0B14 0%, #1A1B3A 25%, #0B0B14 50%, #1A1B3A 75%, #0B0B14 100%); background-attachment: fixed; color: #E8F4FD; overflow-x: auto;">
    <!-- Background Effects -->
    <div class="fixed inset-0 pointer-events-none" style="background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(0, 255, 199, 0.05) 25%, rgba(0, 153, 204, 0.08) 50%, rgba(184, 197, 209, 0.03) 75%, rgba(0, 212, 255, 0.06) 100%);"></div>
    <div class="fixed inset-0 pointer-events-none" style="background: radial-gradient(circle at 20% 80%, rgba(0, 212, 255, 0.12) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(0, 255, 199, 0.08) 0%, transparent 50%), radial-gradient(circle at 40% 40%, rgba(0, 153, 204, 0.06) 0%, transparent 50%);"></div>
    
    <!-- Compact Navigation Header -->
    <header class="nav-container sticky top-0 z-50">
        <div class="container mx-auto px-6 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="w-10 h-10 rounded-xl flex items-center justify-center shadow-lg" style="background: linear-gradient(135deg, #00D4FF 0%, #00FFC7 100%);">
                        <span class="text-lg font-bold" style="color: #0B0B14;">TS</span>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold gradient-text glow-text">TS EAMCET 2025</h1>
                        <p class="text-xs text-gray-400">Phase 1 Cutoffs Finder</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <a href="index.html" class="nav-btn-compact">üîç Search Results</a>
                    <a href="closing-ranks.html" class="nav-btn-compact">üìä Phase 1 Cutoffs</a>
                    <a href="phase2-cutoffs.html" class="nav-btn-compact relative">
                        <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs px-1 py-0.5 rounded-full font-bold text-[10px]">PREDICTED</span>
                        üìà Phase 2 Cutoffs
                    </a>
                    <a href="previous-year-cutoffs.html" class="nav-btn-compact">üìö Previous Year Cutoffs</a>
                    <a href="college-predictor.html" class="nav-btn-compact nav-btn-special">
                        üéØ College Predictor
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-full mx-auto px-6 py-8">
        <!-- Page Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold mb-4" style="font-family: 'Poppins', sans-serif; color: #E8F4FD; text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);">
                Phase 1 <span style="background: linear-gradient(135deg, #00D4FF 0%, #00FFC7 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Closing Ranks</span>
            </h1>
            <p class="text-lg mb-6 max-w-3xl mx-auto" style="color: #B8C5D1;">
                Official closing ranks for all colleges and branches in <span style="background: linear-gradient(135deg, #00D4FF 0%, #00FFC7 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Phase 1 counseling</span>.
            </p>

            <!-- Quick Navigation -->
            <div class="flex justify-center mb-6">
                <a href="college-info.html" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-300 text-sm">
                    üè´ College Info & Details
                </a>
            </div>
        </div>

        <!-- Search and Filter Controls -->
        <div class="card p-6 mb-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4">
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Search</label>
                    <input type="text" id="searchInput" placeholder="Type to search colleges, branches..."
                           class="input-field w-full px-4 py-2">
                    <!-- Quick Examples -->
                    <div class="flex flex-wrap gap-1 mt-2">
                        <span class="text-xs text-gray-500 mr-1">Try:</span>
                        <button onclick="quickSearch('cbit')" class="px-2 py-1 bg-white/5 hover:bg-white/10 border border-white/10 rounded text-xs transition-all duration-300 hover:scale-105">
                            "cbit"
                        </button>
                        <button onclick="quickSearch('cse')" class="px-2 py-1 bg-white/5 hover:bg-white/10 border border-white/10 rounded text-xs transition-all duration-300 hover:scale-105">
                            "cse"
                        </button>
                        <button onclick="quickSearch('jntu')" class="px-2 py-1 bg-white/5 hover:bg-white/10 border border-white/10 rounded text-xs transition-all duration-300 hover:scale-105">
                            "jntu"
                        </button>
                    </div>
                </div>
                <div class="relative">
                    <label class="block text-sm font-medium text-gray-300 mb-2">College</label>
                    <select id="collegeFilter" class="input-field w-full px-4 py-2 appearance-none">
                        <option value="">All Colleges</option>
                    </select>
                    <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none mt-6">
                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                </div>
                <div class="relative">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Branch</label>
                    <select id="branchFilter" class="input-field w-full px-4 py-2 appearance-none">
                        <option value="">All Branches</option>
                    </select>
                    <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none mt-6">
                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Category</label>
                    <select id="categoryFilter" class="input-field w-full px-4 py-2">
                        <option value="">All Categories</option>
                        <option value="OC">OC</option>
                        <option value="BC_A">BC-A</option>
                        <option value="BC_B">BC-B</option>
                        <option value="BC_C">BC-C</option>
                        <option value="BC_D">BC-D</option>
                        <option value="BC_E">BC-E</option>
                        <option value="SC">SC</option>
                        <option value="ST">ST</option>
                        <option value="EWS">EWS</option>
                    </select>
                </div>
                <div class="flex items-end space-x-4">
                    <button onclick="showAllPhasesComparison()" class="btn-secondary px-6 py-3 min-h-[40px] flex items-center justify-center">
                        üìä Show All Phases Comparison
                    </button>
                    <button onclick="exportToCSV()" class="btn-primary px-6 py-3 min-h-[40px] flex items-center justify-center">
                        Export CSV
                    </button>
                </div>
            </div>
            
            <div class="flex justify-between items-center text-sm text-gray-400">
                <div>
                    <span id="recordCount">Loading records...</span>
                    <div class="mt-1 text-base text-yellow-400">
                        üì± <strong>Note:</strong> Click on headers to sort ‚Ä¢ Scroll sideways to see all BC cutoffs ‚Ä¢ Check disclaimer at bottom
                    </div>
                </div>
                <span id="loadingSpinner" class="spinner"></span>
            </div>
        </div>

        <!-- Results Table -->
        <div class="w-full max-w-full mx-auto">
            <!-- Top Scroll Bar -->
            <div class="top-scroll-container mb-2" style="margin-left: 620px;">
                <div class="top-scroll-content"></div>
            </div>
            <div class="table-container" id="mainTableContainer">
                <table class="w-full min-w-max table-fixed">
                    <colgroup>
                        <col style="width: 100px;">  <!-- College Code -->
                        <col style="width: 250px;">  <!-- College Name -->
                        <col style="width: 80px;">   <!-- Branch Code -->
                        <col style="width: 200px;">  <!-- Branch Name -->
                        <col style="width: 80px;">   <!-- OC Boys -->
                        <col style="width: 80px;">   <!-- OC Girls -->
                        <col style="width: 80px;">   <!-- EWS Boys -->
                        <col style="width: 80px;">   <!-- EWS Girls -->
                        <col style="width: 80px;">   <!-- SC Boys -->
                        <col style="width: 80px;">   <!-- SC Girls -->
                        <col style="width: 80px;">   <!-- ST Boys -->
                        <col style="width: 80px;">   <!-- ST Girls -->
                        <col style="width: 80px;">   <!-- BC-A Boys -->
                        <col style="width: 80px;">   <!-- BC-A Girls -->
                        <col style="width: 80px;">   <!-- BC-B Boys -->
                        <col style="width: 80px;">   <!-- BC-B Girls -->
                        <col style="width: 80px;">   <!-- BC-C Boys -->
                        <col style="width: 80px;">   <!-- BC-C Girls -->
                        <col style="width: 80px;">   <!-- BC-D Boys -->
                        <col style="width: 80px;">   <!-- BC-D Girls -->
                        <col style="width: 80px;">   <!-- BC-E Boys -->
                        <col style="width: 80px;">   <!-- BC-E Girls -->
                    </colgroup>
                    <thead class="table-header sticky top-0 z-10">
                        <tr>
                            <th class="sortable px-3 py-3 text-left text-sm cursor-pointer hover:bg-blue-900/30" data-column="College Code">
                                College Code <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-left text-sm cursor-pointer hover:bg-blue-900/30" data-column="College Name">
                                College Name <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-left text-sm cursor-pointer hover:bg-blue-900/30" data-column="Branch Code">
                                Branch Code <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-left text-sm cursor-pointer hover:bg-blue-900/30" data-column="Branch Name">
                                Branch Name <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="OC Boys">
                                OC Boys <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="OC Girls">
                                OC Girls <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="EWS GEN OU">
                                EWS Boys <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="EWS GIRLS">
                                EWS Girls <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="SC Boys">
                                SC Boys <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="SC Girls">
                                SC Girls <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="ST Boys">
                                ST Boys <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="ST Girls">
                                ST Girls <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="BC-A Boys">
                                BC-A Boys <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="BC-A Girls">
                                BC-A Girls <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="BC-B Boys">
                                BC-B Boys <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="BC-B Girls">
                                BC-B Girls <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="BC-C Boys">
                                BC-C Boys <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="BC-C Girls">
                                BC-C Girls <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="BC-D Boys">
                                BC-D Boys <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="BC-D Girls">
                                BC-D Girls <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="BC-E Boys">
                                BC-E Boys <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                            <th class="sortable px-3 py-3 text-center text-sm cursor-pointer hover:bg-blue-900/30" data-column="BC-E Girls">
                                BC-E Girls <span class="sort-indicator">‚ÜïÔ∏è</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody id="resultsTable">
                        <!-- Results will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Pagination Controls -->
        <div id="paginationControls" class="flex justify-center items-center space-x-4 mt-6 hidden">
            <button id="prevPage" class="btn-primary px-6 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed min-h-[40px] flex items-center justify-center">
                ‚Üê Previous
            </button>
            <span id="pageInfo" class="text-gray-300 text-sm"></span>
            <div class="flex items-center space-x-2">
                <span class="text-gray-300 text-sm">Go to page:</span>
                <input
                    type="number"
                    id="pageInput"
                    min="1"
                    class="w-16 px-2 py-1 bg-gray-800 border border-gray-600 rounded text-white text-center text-sm focus:outline-none focus:border-blue-500"
                    placeholder="1"
                >
                <button id="goToPage" class="btn-primary px-3 py-1 rounded text-sm">Go</button>
            </div>
            <button id="nextPage" class="btn-primary px-6 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed min-h-[40px] flex items-center justify-center">
                Next ‚Üí
            </button>
        </div>

        <!-- No Results Message -->
        <div id="noResults" class="hidden text-center py-12">
            <div class="text-6xl mb-4">üîç</div>
            <h3 class="text-xl font-semibold text-gray-300 mb-2">No Results Found</h3>
            <p class="text-gray-400">Try adjusting your search criteria or filters</p>
        </div>

        <!-- Disclaimer Section -->
        <div class="w-full max-w-full mx-auto mt-8 mb-8">
            <div class="bg-gradient-to-r from-red-900/20 to-orange-900/20 border border-red-500/30 rounded-xl p-6">
                <h3 class="text-xl font-bold text-red-400 mb-4 flex items-center">
                    ‚ö†Ô∏è Important Disclaimer
                </h3>
                <div class="text-sm text-gray-300 space-y-2">
                    <p><strong>1.</strong> Last rank statement does not reflect the candidates admitted in special reservation categories like PH, NCC, Sports and Games, Children of Armed Personnel (CAP) seats, State wide colleges & Minority colleges.</p>
                    <p><strong>2.</strong> Every care has been taken to present accurate information. The Ranks shown are at the end of Web Counseling process and does not indicate the dropouts or spot admissions.</p>
                    <p><strong>3.</strong> The statement shall be used only for information to assess the mode of opting by candidates and shall in no way reflect the rank upto which seat can be allotted in the present academic year.</p>
                    <p><strong>4.</strong> The ranks indicated inclusive of the ranks allotted in respect of Consequential Vacancies arose at the final round of Allotment.</p>
                    <p><strong>5.</strong> The TGCHE/DTE is not responsible for Print Errors.</p>
                    <p><strong>6.</strong> Girls are also eligible for Boys seats.</p>
                    <p><strong>7.</strong> In terms of G.O.Ms.No. 42 Higher Education Dept.dated:18-05-2009,15% unreserved seats are filled first with combined merit list of candidates followed by 85% seats with local candidates only.</p>
                    <p><strong>8.</strong> NA means Not Applicable.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="card-dark border-t border-white/5 mt-20">
        <div class="container mx-auto px-6 py-8">
            <div class="text-center">
                <div class="flex items-center justify-center mb-4">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 via-cyan-500 to-teal-500 flex items-center justify-center mr-3">
                        <span class="text-sm font-bold text-white">TS</span>
                    </div>
                    <span class="text-lg font-semibold gradient-text">TS EAMCET Phase 1 Cutoffs</span>
                </div>

                <!-- Official Footer -->
                <div class="bg-gradient-to-r from-blue-900/30 to-purple-900/30 rounded-lg p-4">
                    <div class="flex items-center justify-center mb-2">
                        <span class="bg-blue-600 text-white text-xs px-2 py-1 rounded font-bold mr-2">TS</span>
                        <span class="text-sm font-semibold text-blue-300">TS EAMCET 2025</span>
                    </div>
                    <p class="text-xs text-gray-300 text-center leading-relaxed">
                        ¬© 2025 TS EAMCET Results Finder. Data sourced from official TS EAMCET 2025 Phase 1 cutoffs.<br>
                        Built with modern web technologies ‚Ä¢ Optimized for performance ‚Ä¢ Mobile-friendly design
                    </p>
                    <p class="text-xs text-gray-400 text-center mt-2">
                        <strong>Data Source Disclaimer:</strong> All data rights belong to the <a href="https://tgeapcet.nic.in/" target="_blank" class="text-blue-400 hover:text-blue-300 underline">official TS EAMCET website</a>.
                        This website uses data sourced from their official publications. Some data may be missing or incomplete.
                        For official and complete information, please refer to the <a href="https://tgeapcet.nic.in/" target="_blank" class="text-blue-400 hover:text-blue-300 underline">official TS EAMCET website</a>.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <style>
        /* Ensure proper scrolling */
        html, body {
            overflow-y: auto !important;
            overflow-x: auto !important;
            height: auto !important;
            min-height: 100vh;
        }

        /* Binary Grid Theme Styles - Unique Nebula Colors */

        /* Compact Navigation Styles */
        .nav-container {
            background: rgba(11, 11, 20, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(42, 45, 71, 0.5);
        }

        .nav-btn-compact {
            padding: 0.75rem 1.25rem;
            border-radius: 20px;
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.3s ease;
            border: 1px solid rgba(232, 244, 253, 0.1);
            background: rgba(232, 244, 253, 0.05);
            color: rgba(232, 244, 253, 0.8);
            white-space: nowrap;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn-compact:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: rgba(0, 255, 199, 0.3);
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.2);
        }

        .nav-btn-compact.nav-btn-active {
            background: linear-gradient(135deg, #00D4FF 0%, #00FFC7 100%);
            color: #0B0B14;
            border-color: rgba(232, 244, 253, 0.3);
            font-weight: 600;
        }

        .nav-btn-compact.nav-btn-special {
            background: linear-gradient(135deg, #FF6347 0%, #00BFFF 100%);
            color: white;
            font-weight: 600;
        }

        .gradient-text {
            background: linear-gradient(135deg, #00D4FF 0%, #00FFC7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .glow-text {
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }

        @media (max-width: 768px) {
            .nav-btn-compact {
                padding: 0.6rem 1rem;
                font-size: 0.75rem;
                min-height: 36px;
            }
        }

        .nav-btn {
            padding: 1rem;
            border-radius: 20px;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 1px solid rgba(232, 244, 253, 0.1);
            background: rgba(232, 244, 253, 0.05);
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .nav-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: rgba(0, 255, 199, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.2);
            text-shadow: 0 0 10px rgba(0, 255, 199, 0.5);
        }

        .nav-btn-active {
            background: linear-gradient(135deg, #00D4FF 0%, #00FFC7 100%);
            border-color: rgba(232, 244, 253, 0.3);
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        }

        .nav-btn-special {
            /* Remove extra padding to match other nav buttons */
            border-radius: 25px;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .nav-btn-special:hover {
            background: rgba(255, 165, 0, 0.2);
            border-color: rgba(255, 165, 0, 0.3);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 30px rgba(255, 165, 0, 0.3);
        }

        .card {
            background: rgba(26, 27, 58, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(42, 45, 71, 0.5);
            border-radius: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .input-field {
            background: rgba(11, 11, 20, 0.9);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 12px;
            color: #E8F4FD;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .input-field:focus {
            border-color: #00D4FF;
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.2), 0 0 20px rgba(0, 212, 255, 0.1);
            background: rgba(11, 11, 20, 0.95);
            outline: none;
            transform: translateY(-1px);
        }

        .input-field:hover {
            border-color: rgba(0, 212, 255, 0.5);
            background: rgba(11, 11, 20, 0.95);
        }

        .input-field::placeholder {
            color: #B8C5D1;
        }

        .input-field option {
            background: rgba(11, 11, 20, 0.95);
            color: #E8F4FD;
            padding: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00D4FF 0%, #00FFC7 100%);
            border: none;
            border-radius: 12px;
            color: #0B0B14;
            font-weight: 600;
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
        }

        .table-container {
            background: rgba(26, 27, 58, 0.6);
            border-radius: 20px;
            border: 1px solid rgba(42, 45, 71, 0.5);
            overflow-y: auto;
            overflow-x: auto;
            max-height: 70vh;
        }



        .table-container::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        .table-container::-webkit-scrollbar-track {
            background: rgba(11, 11, 20, 0.3);
            border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb {
            background: rgba(0, 212, 255, 0.5);
            border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 212, 255, 0.7);
        }

        /* Top scroll bar */
        .top-scroll-container {
            background: rgba(26, 27, 58, 0.6);
            border-radius: 20px 20px 0 0;
            border: 1px solid rgba(42, 45, 71, 0.5);
            border-bottom: none;
            overflow-x: auto;
            overflow-y: hidden;
            height: 20px;
        }

        .top-scroll-content {
            height: 1px;
            /* Width will be set by JavaScript to match table width */
        }

        .top-scroll-container::-webkit-scrollbar {
            height: 8px;
        }

        .top-scroll-container::-webkit-scrollbar-track {
            background: rgba(11, 11, 20, 0.3);
            border-radius: 4px;
        }

        .top-scroll-container::-webkit-scrollbar-thumb {
            background: rgba(0, 212, 255, 0.5);
            border-radius: 4px;
        }

        .top-scroll-container::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 212, 255, 0.7);
        }

        /* Sticky columns */
        .table-container table {
            position: relative;
        }

        /* First column - College Code */
        .table-container th:nth-child(1),
        .table-container td:nth-child(1) {
            position: sticky;
            left: 0;
            z-index: 10;
            background: rgba(26, 27, 58, 0.95);
            border-right: none;
            min-width: 90px;
            max-width: 90px;
        }

        /* Second column - College Name */
        .table-container th:nth-child(2),
        .table-container td:nth-child(2) {
            position: sticky;
            left: 90px;
            z-index: 10;
            background: rgba(26, 27, 58, 0.95);
            border-right: none;
            min-width: 200px;
            max-width: 200px;
        }

        /* Third column - Branch Code */
        .table-container th:nth-child(3),
        .table-container td:nth-child(3) {
            position: sticky;
            left: 290px;
            z-index: 10;
            background: rgba(26, 27, 58, 0.95);
            border-right: none;
            min-width: 80px;
            max-width: 80px;
        }

        /* Fourth column - Branch Name */
        .table-container th:nth-child(4),
        .table-container td:nth-child(4) {
            position: sticky;
            left: 370px;
            z-index: 10;
            background: rgba(26, 27, 58, 0.95);
            border-right: none;
            min-width: 200px;
            max-width: 200px;
        }

        /* Header cells need higher z-index */
        .table-container thead th:nth-child(1),
        .table-container thead th:nth-child(2),
        .table-container thead th:nth-child(3) {
            z-index: 11;
        }

        .table-fixed {
            table-layout: fixed !important;
            width: 100% !important;
        }

        .table-fixed th,
        .table-fixed td {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .college-name {
            max-width: 240px;
            line-height: 1.3;
            font-size: 0.875rem;
            word-wrap: break-word;
            hyphens: auto;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: normal;
        }

        .branch-name {
            max-width: 190px;
            line-height: 1.3;
            font-size: 0.875rem;
            word-wrap: break-word;
            hyphens: auto;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: normal;
        }

        .table-header {
            background: rgba(11, 11, 20, 0.95) !important;
            backdrop-filter: blur(20px);
            color: white !important;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
        }

        .table-header th {
            background: none !important;
            background-image: none !important;
            background-color: transparent !important;
            color: white !important;
            padding: 12px 8px !important;
            font-size: 0.75rem !important;
            line-height: 1.2 !important;
            vertical-align: middle !important;
            position: relative;
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
        }

        /* Specific column widths */
        .table-fixed th:nth-child(1),
        .table-fixed td:nth-child(1) { width: 80px; } /* College Code */

        .table-fixed th:nth-child(2),
        .table-fixed td:nth-child(2) { width: 260px; } /* College Name */

        .table-fixed th:nth-child(3),
        .table-fixed td:nth-child(3) { width: 80px; } /* Branch Code */

        .table-fixed th:nth-child(4),
        .table-fixed td:nth-child(4) { width: 200px; } /* Branch Name */

        .table-fixed th:nth-child(n+5),
        .table-fixed td:nth-child(n+5) { width: 70px; } /* All rank columns */

        /* Prevent any gradient backgrounds on table elements */
        table th,
        table td,
        .table-header,
        .table-header th {
            background-image: none !important;
        }

        .table-row {
            background: rgba(26, 27, 58, 0.4);
        }

        .table-row:hover {
            background: rgba(0, 212, 255, 0.15);
        }

        .gradient-text {
            background: linear-gradient(135deg, #00D4FF 0%, #00FFC7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .glow-text {
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .spinner {
            border: 2px solid rgba(232, 244, 253, 0.1);
            border-left: 2px solid #00D4FF;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0B0B14;
        }

        ::-webkit-scrollbar-thumb {
            background: #00D4FF;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #00FFC7;
        }
    </style>

    <script>
        let allData = [];
        let filteredData = [];
        let currentSort = { column: null, direction: 'asc' };
        let currentPage = 1;
        const itemsPerPage = 100;



        // Load data on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            setupEventListeners();
            setupSorting();
            setupPagination();
        });

        function setupEventListeners() {
            const searchInput = document.getElementById('searchInput');
            const collegeFilter = document.getElementById('collegeFilter');
            const branchFilter = document.getElementById('branchFilter');
            const categoryFilter = document.getElementById('categoryFilter');

            // Debounced search
            let searchTimeout;
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    filterData();
                }, 300);
            });

            collegeFilter.addEventListener('change', filterData);
            branchFilter.addEventListener('change', filterData);
            categoryFilter.addEventListener('change', filterData);
        }

        function populateDropdowns() {
            const colleges = new Set();
            const branches = new Set();

            allData.forEach(item => {
                if (item["College Name"]) colleges.add(item["College Name"]);
                if (item["Branch Name"]) branches.add(item["Branch Name"]);
            });

            // Populate college dropdown
            const collegeFilter = document.getElementById('collegeFilter');
            collegeFilter.innerHTML = '<option value="">All Colleges</option>';
            Array.from(colleges).sort().forEach(college => {
                const option = document.createElement('option');
                option.value = college;
                option.textContent = college;
                collegeFilter.appendChild(option);
            });

            // Populate branch dropdown
            const branchFilter = document.getElementById('branchFilter');
            branchFilter.innerHTML = '<option value="">All Branches</option>';
            Array.from(branches).sort().forEach(branch => {
                const option = document.createElement('option');
                option.value = branch;
                option.textContent = branch;
                branchFilter.appendChild(option);
            });
        }

        async function loadData() {
            try {
                let response;

                // Try server API first (for Vercel/Node.js hosting)
                try {
                    response = await fetch('/api/closing-ranks');
                    if (!response.ok) throw new Error('Server API not available');
                    console.log('‚úÖ Loading closing ranks from server API');
                } catch (serverError) {
                    // Fallback to static JSON file (for GitHub Pages)
                    console.log('üîÑ Server API not available, trying static file...');
                    response = await fetch('./data/closing-ranks-2025-phase1.json');
                    if (!response.ok) {
                        throw new Error(`Static file not found! status: ${response.status}`);
                    }
                    console.log('‚úÖ Loading closing ranks from static file');
                }

                allData = await response.json();
                filteredData = [...allData];
                populateDropdowns();
                displayData();
                updateRecordCount();
                hideSpinner();
                console.log(`üìä Loaded ${allData.length} closing ranks records`);
            } catch (error) {
                console.error('‚ùå Error loading data:', error);
                document.getElementById('recordCount').textContent = 'Error loading data';
                hideSpinner();
            }
        }

        function filterData() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const collegeFilter = document.getElementById('collegeFilter').value;
            const branchFilter = document.getElementById('branchFilter').value;

            filteredData = allData.filter(item => {
                const matchesSearch = !searchTerm ||
                    (item["College Name"] && item["College Name"].toLowerCase().includes(searchTerm)) ||
                    (item["Branch Name"] && item["Branch Name"].toLowerCase().includes(searchTerm)) ||
                    (item["College Code"] && item["College Code"].toLowerCase().includes(searchTerm));

                const matchesCollege = !collegeFilter || item["College Name"] === collegeFilter;
                const matchesBranch = !branchFilter || item["Branch Name"] === branchFilter;

                // Filter out unrealistic cutoff ranks (400k+)
                const hasRealisticRanks = Object.keys(item).some(key => {
                    if (key.includes('Boys') || key.includes('Girls') || key.includes('BOYS') || key.includes('GIRLS')) {
                        const rank = parseInt(item[key]);
                        return rank && rank > 0 && rank < 400000; // Only include ranks below 400k
                    }
                    return false;
                });

                return matchesSearch && matchesCollege && matchesBranch && hasRealisticRanks;
            });

            currentPage = 1; // Reset to first page when filtering
            displayData();
            updateRecordCount();
        }

        function displayData() {
            const tableBody = document.getElementById('resultsTable');
            const noResults = document.getElementById('noResults');

            if (filteredData.length === 0) {
                tableBody.innerHTML = '';
                noResults.classList.remove('hidden');
                return;
            }

            noResults.classList.add('hidden');

            // Display paginated rows for better performance
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const displayRows = filteredData.slice(startIndex, endIndex);

            tableBody.innerHTML = displayRows.map(row => {
                const getRank = (field) => {
                    const rank = row[field];
                    return (rank && rank !== "NA" && rank !== "-" && rank !== "") ? `<span class="font-medium text-white">${rank}</span>` : '<span class="text-gray-500">-</span>';
                };

                return `
                <tr class="table-row border-b border-gray-700/30">
                    <td class="px-3 py-3 text-sm font-medium text-white">${row["College Code"] || ''}</td>
                    <td class="px-3 py-3 text-sm text-gray-300">
                        <div class="college-name">${formatCollegeName(row["College Name"] || '')}</div>
                    </td>
                    <td class="px-3 py-3 text-sm font-medium text-white">${row["Branch Code"] || getBranchCode(row["Branch Name"] || '')}</td>
                    <td class="px-3 py-3 text-sm text-gray-300">
                        <div class="branch-name">${formatBranchName(row["Branch Name"] || '')}</div>
                    </td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('OC Boys')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('OC Girls')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('EWS GEN OU')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('EWS GIRLS')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('SC Boys')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('SC Girls')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('ST Boys')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('ST Girls')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('BC-A Boys')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('BC-A Girls')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('BC-B Boys')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('BC-B Girls')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('BC-C Boys')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('BC-C Girls')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('BC-D Boys')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('BC-D Girls')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('BC-E Boys')}</td>
                    <td class="px-3 py-3 text-center text-sm text-white font-medium">${getRank('BC-E Girls')}</td>
                </tr>
                `;
            }).join('');

            updatePagination();
        }

        function updateRecordCount() {
            const count = filteredData.length;
            const total = allData.length;
            document.getElementById('recordCount').textContent =
                `Showing ${count} of ${total} records`;
        }

        function updatePagination() {
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            const paginationControls = document.getElementById('paginationControls');
            const pageInfo = document.getElementById('pageInfo');
            const prevBtn = document.getElementById('prevPage');
            const nextBtn = document.getElementById('nextPage');
            const pageInput = document.getElementById('pageInput');

            if (totalPages <= 1) {
                paginationControls.classList.add('hidden');
                return;
            }

            paginationControls.classList.remove('hidden');
            pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;

            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages;

            // Update page input max value
            pageInput.max = totalPages;
            pageInput.placeholder = currentPage.toString();
        }

        function setupPagination() {
            document.getElementById('prevPage').addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    displayData();
                }
            });

            document.getElementById('nextPage').addEventListener('click', () => {
                const totalPages = Math.ceil(filteredData.length / itemsPerPage);
                if (currentPage < totalPages) {
                    currentPage++;
                    displayData();
                }
            });

            // Go to page functionality
            document.getElementById('goToPage').addEventListener('click', () => {
                const pageInput = document.getElementById('pageInput');
                const targetPage = parseInt(pageInput.value);
                const totalPages = Math.ceil(filteredData.length / itemsPerPage);

                if (targetPage >= 1 && targetPage <= totalPages) {
                    currentPage = targetPage;
                    displayData();
                    pageInput.value = '';
                } else {
                    alert(`Please enter a page number between 1 and ${totalPages}`);
                }
            });

            // Allow Enter key to trigger go to page
            document.getElementById('pageInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    document.getElementById('goToPage').click();
                }
            });
        }

        function hideSpinner() {
            document.getElementById('loadingSpinner').style.display = 'none';
        }

        // Show All Phases Comparison
        function showAllPhasesComparison() {
            // Navigate to previous year cutoffs page which shows all phases
            window.location.href = 'previous-year-cutoffs.html';
        }

        // Quick search function for example buttons
        function quickSearch(term) {
            const searchInput = document.getElementById('searchInput');
            searchInput.value = term;
            searchInput.focus();
            // Trigger search
            filterData();
        }

        // Make quickSearch globally accessible
        window.quickSearch = quickSearch;

        function exportToCSV() {
            if (filteredData.length === 0) {
                alert('No data to export');
                return;
            }

            const headers = [
                'College Code', 'College Name', 'Branch Code', 'Branch Name',
                'OC Boys', 'OC Girls', 'BC-A Boys', 'BC-A Girls', 'BC-B Boys', 'BC-B Girls',
                'BC-C Boys', 'BC-C Girls', 'BC-D Boys', 'BC-D Girls', 'BC-E Boys', 'BC-E Girls',
                'SC Boys', 'SC Girls', 'ST Boys', 'ST Girls', 'EWS Boys', 'EWS Girls'
            ];

            const csvContent = [
                headers.join(','),
                ...filteredData.map(row => [
                    `"${row["College Code"] || ''}"`,
                    `"${row["College Name"] || ''}"`,
                    `"${getBranchCode(row["Branch Name"] || '')}"`,
                    `"${row["Branch Name"] || ''}"`,
                    row["OC BOYS"] || '',
                    row["OC GIRLS"] || '',
                    row["BC_A BOYS"] || '',
                    row["BC_A GIRLS"] || '',
                    row["BC_B BOYS"] || '',
                    row["BC_B GIRLS"] || '',
                    row["BC_C BOYS"] || '',
                    row["BC_C GIRLS"] || '',
                    row["BC_D BOYS"] || '',
                    row["BC_D GIRLS"] || '',
                    row["BC_E BOYS"] || '',
                    row["BC_E GIRLS"] || '',
                    row["SC BOYS"] || '',
                    row["SC GIRLS"] || '',
                    row["ST BOYS"] || '',
                    row["ST GIRLS"] || '',
                    row["EWS GEN OU"] || '',
                    row["EWS GIRLS"] || ''
                ].join(','))
            ].join('\n');

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'phase1-cutoffs-excel-format.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function setupSorting() {
            document.querySelectorAll('.sortable').forEach(header => {
                header.addEventListener('click', () => {
                    const column = header.dataset.column;
                    sortTable(column);
                });
            });
        }

        function sortTable(column) {
            if (currentSort.column === column) {
                currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.column = column;
                currentSort.direction = 'asc';
            }

            // Define rank columns (all columns except College Code, College Name, Branch Code, Branch Name)
            const rankColumns = [
                'OC Boys', 'OC Girls', 'EWS Boys', 'EWS Girls',
                'SC Boys', 'SC Girls', 'ST Boys', 'ST Girls',
                'BC-A Boys', 'BC-A Girls', 'BC-B Boys', 'BC-B Girls',
                'BC-C Boys', 'BC-C Girls', 'BC-D Boys', 'BC-D Girls',
                'BC-E Boys', 'BC-E Girls'
            ];

            filteredData.sort((a, b) => {
                let aVal = a[column];
                let bVal = b[column];

                // Check if this is a rank column
                if (rankColumns.includes(column)) {
                    // Handle NA values - push them to the end
                    const aIsNA = aVal === null || aVal === undefined || aVal === 'NA' || aVal === '';
                    const bIsNA = bVal === null || bVal === undefined || bVal === 'NA' || bVal === '';

                    if (aIsNA && bIsNA) return 0;
                    if (aIsNA) return 1; // a goes to end
                    if (bIsNA) return -1; // b goes to end

                    // Convert to numbers for rank comparison
                    const aNum = parseInt(aVal) || 0;
                    const bNum = parseInt(bVal) || 0;

                    // For ranks: ascending = lower ranks first (better ranks), descending = higher ranks first
                    return currentSort.direction === 'asc' ? aNum - bNum : bNum - aNum;
                }

                // Handle text columns (College Code, College Name, Branch Code, Branch Name)
                if (typeof aVal === 'string' && typeof bVal === 'string') {
                    return currentSort.direction === 'asc'
                        ? aVal.localeCompare(bVal)
                        : bVal.localeCompare(aVal);
                }

                // Handle mixed or null values for text columns
                if (aVal === null || aVal === undefined || aVal === 'NA') aVal = '';
                if (bVal === null || bVal === undefined || bVal === 'NA') bVal = '';

                return currentSort.direction === 'asc'
                    ? String(aVal).localeCompare(String(bVal))
                    : String(bVal).localeCompare(String(aVal));
            });

            updateSortIndicators(column);
            displayData();
        }

        function updateSortIndicators(activeColumn) {
            document.querySelectorAll('.sort-indicator').forEach(indicator => {
                indicator.textContent = '‚ÜïÔ∏è';
            });

            const activeHeader = document.querySelector(`[data-column="${activeColumn}"] .sort-indicator`);
            if (activeHeader) {
                activeHeader.textContent = currentSort.direction === 'asc' ? '‚Üë' : '‚Üì';
            }
        }

        function formatCollegeName(name) {
            if (!name) return '';

            // Split long college names into multiple lines for better display
            const words = name.split(' ');
            if (words.length <= 3) return name;

            // Group words into lines of 2-3 words each
            const lines = [];
            for (let i = 0; i < words.length; i += 3) {
                lines.push(words.slice(i, i + 3).join(' '));
            }

            return lines.join('<br>');
        }

        function formatBranchName(name) {
            if (!name) return '';

            // Split long branch names into multiple lines
            const words = name.split(' ');
            if (words.length <= 3) return name;

            // Group words into lines of 3 words each for branches
            const lines = [];
            for (let i = 0; i < words.length; i += 3) {
                lines.push(words.slice(i, i + 3).join(' '));
            }

            return lines.join('<br>');
        }

        // Enhanced getBranchCode function using official TS EAMCET branch codes
        function getBranchCode(branchName) {
            if (!branchName) return '';

            // Official branch codes from TS EAMCET (corrected mapping)
            const officialBranchCodes = {
                // Mechanical & Related
                "AERONAUTICAL ENGINEERING": "ANE",
                "AUTOMATION AND ROBOTICS": "ARB",
                "AUTOMOBILE ENGINEERING": "AUT",
                "BUILDING SERVICES ENGG": "BSE",
                "CIVIL ENGINEERING": "CIV",
                "INDUSTRIAL PRODUCTION ENGINEERING": "IPE",
                "MECHANICAL (MECHTRONICS) ENGINEERING": "MCT",
                "MECHANICAL ENGINEERING": "MEC",
                "METALLURGICAL ENGINEERING": "MET",
                "BTECH MECHANICAL WITH MTECH MANUFACTURING SYSTEMS": "MMS",
                "BTECH MECHANICAL WITH MTECH MANUFACTURING  SYSTEMS": "MMS",
                "BTECH MECHANICAL WITH MTECH THERMAL ENGG": "MTE",
                "B.PLANNING": "PLG",

                // Agricultural & Bio
                "AGRICULTURAL ENGINEERING": "AGR",
                "BIO-TECHNOLOGY": "BIO",
                "CHEMICAL ENGINEERING": "CHE",
                "DAIRYING": "DRG",
                "FOOD TECHNOLOGY": "FDT",
                "GEO INFORMATICS": "GEO",
                "MINING ENGINEERING": "MIN",
                "METALLURGY AND MATERIAL ENGINEERING": "MMT",
                "PHARMACEUTICAL ENGINEERING": "PHE",
                "TEXTILE TECHNOLOGY / TEXTILE ENGINEERING": "TEX",

                // Computer Science & IT
                "COMPUTER ENGINEERING": "CME",
                "COMPUTER SCIENCE AND ENGG (ARTIFICIAL INTELLIGENCE)": "CSA",
                "COMPUTER SCIENCE & DESIGN": "CSG",
                "COMPUTER SCIENCE & ENGINEERING (NETWORKS)": "CSN",
                "COMPUTER SCIENCE AND ENGINEERING (IOT)": "CSO",
                "COMPUTER SCIENCE AND TECHNOLOGY": "CST",
                "COMPUTER ENGINEERING(SOFTWARE ENGINEERING)": "CSW",
                "DIGITAL TECHNIQUES FOR DESIGN AND PLANNING": "DTD",
                "INFORMATION TECHNOLOGY": "INF",
                "INFORMATION TECHNOLOGY AND ENGINEERING": "ITE",

                // AI & Data Science & Core CS
                "ARTIFICIAL INTELLIGENCE": "AI",
                "ARTIFICIAL INTELLIGENCE AND DATA SCIENCE": "AID",
                "ARTIFICIAL INTELLIGENCE AND MACHINE LEARNING": "AIM",
                "CSE (IOT AND CYBER SECURITY INCLUDING BLOCK CHAIN TECHNOLOGY)": "CIC",
                "CSE (IoT AND CYBER SECURITY INCLUDING BLOCK CHAIN TECHNOLOGY)": "CIC",
                "COMPUTER SCIENCE": "CS",
                "COMPUTER SCIENCE AND BUSINESS SYSTEM": "CSB",
                "COMPUTER SCIENCE AND ENGINEERING (CYBER SECURITY)": "CSC",
                "COMPUTER SCIENCE AND ENGINEERING (DATA SCIENCE)": "CSD",
                "COMPUTER SCIENCE AND ENGINEERING": "CSE",
                "COMPUTER SCIENCE AND INFORMATION TECHNOLOGY": "CSI",
                "COMPUTER SCIENCE AND ENGINEERING (ARTIFICIAL INTELLIGENCE AND MACHINE LEARNING)": "CSM",

                // Additional CS variations (without parentheses)
                "COMPUTER SCIENCE AND ENGINEERING ARTIFICIAL INTELLIGENCE AND MACHINE LEARNING": "CSM",
                "COMPUTER SCIENCE AND ENGINEERING DATA SCIENCE": "CSD",
                "COMPUTER SCIENCE AND ENGINEERING CYBER SECURITY": "CSC",
                "COMPUTER SCIENCE AND ENGINEERING IOT": "CSO",
                "COMPUTER SCIENCE DESIGN": "CSG",
                "COMPUTER SCIENCE AND BUSINESS SYSTEMS": "CSB",

                // Common variations and typos
                "COMPUTER SCIENCE & BUSINESS SYSTEMS": "CSB",
                "COMPUTER SCIENCE AND BUSINESS SYSTEMS": "CSB",
                "COMPUTER ENGINEERING SOFTWARE ENGINEERING": "CSW",
                "COMPUTER ENGINEERINGSOFTWARE ENGINEERING": "CSW",
                "CSE_IoT_AND_CYBER_SECURITY_INCLUDING_BLOCK_CHAIN_TECHNOLOGY": "CIC",
                "COMPUTER SCIENCE & ENGINEERING NETWORKS": "CSN",
                "COMPUTER SCIENCE & ENGINEERING (NETWORKS)": "CSN",

                // Electronics & Electrical
                "BIO-MEDICAL ENGINEERING": "BME",
                "ELECTRONICS AND COMMUNICATION (ADVANCED COMMUNICATION TECH)": "ECA",
                "ELECTRONICS AND COMMUNICATION ENGINEERING": "ECE",
                "ELECTRONICS COMMUNICATION AND INSTRUMENTATION ENGINEERING": "ECI",
                "ELECTRONICS AND COMPUTER ENGINEERING": "ECM",
                "ELECTRICAL AND ELECTRONICS ENGINEERING": "EEE",
                "ELECTRONICS AND INSTRUMENTATION ENGINEERING": "EIE",
                "ELECTRONICS AND TELECOMMUNICATION ENGG": "ETE",
                "ELECTRONICS AND TELEMATICS": "ETM",
                "ELECTRONICS ENGINEERING (VLSI DESIGN AND TECHNOLOGY)": "EVL",

                // Pharmacy
                "PHARM - D (M.P.C. STREAM)": "PHD",
                "B. PHARMACY (M.P.C. STREAM)": "PHM"
            };

            // Normalize input branch name
            const normalizedName = branchName.toUpperCase().trim();

            // Try exact match first
            if (officialBranchCodes[normalizedName]) {
                return officialBranchCodes[normalizedName];
            }

            // Try partial matches for common variations
            for (const [name, code] of Object.entries(officialBranchCodes)) {
                if (name.includes(normalizedName) || normalizedName.includes(name)) {
                    return code;
                }
            }

            // Fallback to first 3-4 characters if no match found
            return branchName.substring(0, 4).toUpperCase();
        }

        // Setup dual scroll bars for sticky columns
        function setupDualScrollBars() {
            const topScrollContainer = document.querySelector('.top-scroll-container');
            const topScrollContent = document.querySelector('.top-scroll-content');
            const mainTableContainer = document.getElementById('mainTableContainer');
            const table = mainTableContainer.querySelector('table');

            if (!topScrollContainer || !mainTableContainer || !table) return;

            // Set the width of top scroll content to match scrollable area width
            function updateTopScrollWidth() {
                const tableWidth = table.scrollWidth;
                const stickyColumnsWidth = 620; // 80 + 260 + 80 + 200 = width of sticky columns
                const scrollableWidth = Math.max(0, tableWidth - stickyColumnsWidth);
                topScrollContent.style.width = scrollableWidth + 'px';
            }

            // Sync scroll positions
            function syncScrollLeft(source, target) {
                if (source.scrollLeft !== target.scrollLeft) {
                    target.scrollLeft = source.scrollLeft;
                }
            }

            // Event listeners for scroll synchronization
            topScrollContainer.addEventListener('scroll', () => {
                syncScrollLeft(topScrollContainer, mainTableContainer);
            });

            mainTableContainer.addEventListener('scroll', () => {
                syncScrollLeft(mainTableContainer, topScrollContainer);
            });

            // Update scroll width when data changes
            const observer = new MutationObserver(updateTopScrollWidth);
            observer.observe(mainTableContainer, { childList: true, subtree: true });

            // Initial setup
            updateTopScrollWidth();
        }

        // Initialize dual scroll bars after DOM is loaded
        document.addEventListener('DOMContentLoaded', setupDualScrollBars);


    </script>

    <!-- Navigation Active State Manager -->
    <script src="navigation-active-state.js"></script>
</body>
</html>
